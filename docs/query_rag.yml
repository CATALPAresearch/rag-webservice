# docs/query_rag.yml
post:
  summary: Query documents using RAG (Retrieval-Augmented Generation)
  description: Accepts a prompt and filter information to query indexed documents via RAG and return a response generated by an LLM.
  tags:
    - LLM
  requestBody:
    required: true
    content:
      application/x-www-form-urlencoded:
        schema:
          type: object
          properties:
            prompt:
              type: string
              description: Prompt/question to be answered by the LLM.
              example: "Was steht im Dokument Ã¼ber Datenschutz?"
            filter:
              type: string
              description: JSON string representing filter criteria like system, courses, and activity IDs.
              example: '{"system": ["aple-demo-moodle"], "courses": [0], "activity_longpage": [1,7]}'
  responses:
    '200':
      description: Successful response with generated answer
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: ""
              response:
                type: string
                description: The LLM-generated response
    '400':
      description: Bad request (missing or malformed input)
    '500':
      description: Internal server error
